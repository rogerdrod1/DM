import{r as v,b as ws}from"./vendor-54c56471.js";import{$ as js,T as he,a as Cs,M as ys,P as Te,S as qe,b as Ns,u as re,c as He,C as Ye,E as Xe,d as Ds,A as Ss,U as be,X as Ne,F as ks,D as De,e as Rs,f as Ms,g as fe,h as Ze,i as Se,j as ve,B as Is,k as Us,l as As,m as Ts,L as Os,n as Fs,o as _s,p as Ls,R as Ps}from"./ui-c3b1a433.js";import{c as Qe,R as Oe,B as zs,C as Fe,X as _e,Y as xe,T as Le,L as Pe,a as ze,b as Es,d as Ee}from"./charts-051634d2.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var es={exports:{}},we={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=v,Vs=Symbol.for("react.element"),Bs=Symbol.for("react.fragment"),Ks=Object.prototype.hasOwnProperty,Js=$s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ws={key:!0,ref:!0,__self:!0,__source:!0};function ss(r,s,t){var a,o={},l=null,n=null;t!==void 0&&(l=""+t),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(n=s.ref);for(a in s)Ks.call(s,a)&&!Ws.hasOwnProperty(a)&&(o[a]=s[a]);if(r&&r.defaultProps)for(a in s=r.defaultProps,s)o[a]===void 0&&(o[a]=s[a]);return{$$typeof:Vs,type:r,key:l,ref:n,props:o,_owner:Js.current}}we.Fragment=Bs;we.jsx=ss;we.jsxs=ss;es.exports=we;var e=es.exports,ts,$e=ws;ts=$e.createRoot,$e.hydrateRoot;const Re="-",Gs=r=>{const s=Hs(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:a}=r;return{getClassGroupId:n=>{const i=n.split(Re);return i[0]===""&&i.length!==1&&i.shift(),rs(i,s)||qs(n)},getConflictingClassGroupIds:(n,i)=>{const h=t[n]||[];return i&&a[n]?[...h,...a[n]]:h}}},rs=(r,s)=>{var n;if(r.length===0)return s.classGroupId;const t=r[0],a=s.nextPart.get(t),o=a?rs(r.slice(1),a):void 0;if(o)return o;if(s.validators.length===0)return;const l=r.join(Re);return(n=s.validators.find(({validator:i})=>i(l)))==null?void 0:n.classGroupId},Ve=/^\[(.+)\]$/,qs=r=>{if(Ve.test(r)){const s=Ve.exec(r)[1],t=s==null?void 0:s.substring(0,s.indexOf(":"));if(t)return"arbitrary.."+t}},Hs=r=>{const{theme:s,prefix:t}=r,a={nextPart:new Map,validators:[]};return Xs(Object.entries(r.classGroups),t).forEach(([l,n])=>{ke(n,a,l,s)}),a},ke=(r,s,t,a)=>{r.forEach(o=>{if(typeof o=="string"){const l=o===""?s:Be(s,o);l.classGroupId=t;return}if(typeof o=="function"){if(Ys(o)){ke(o(a),s,t,a);return}s.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([l,n])=>{ke(n,Be(s,l),t,a)})})},Be=(r,s)=>{let t=r;return s.split(Re).forEach(a=>{t.nextPart.has(a)||t.nextPart.set(a,{nextPart:new Map,validators:[]}),t=t.nextPart.get(a)}),t},Ys=r=>r.isThemeGetter,Xs=(r,s)=>s?r.map(([t,a])=>{const o=a.map(l=>typeof l=="string"?s+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([n,i])=>[s+n,i])):l);return[t,o]}):r,Zs=r=>{if(r<1)return{get:()=>{},set:()=>{}};let s=0,t=new Map,a=new Map;const o=(l,n)=>{t.set(l,n),s++,s>r&&(s=0,a=t,t=new Map)};return{get(l){let n=t.get(l);if(n!==void 0)return n;if((n=a.get(l))!==void 0)return o(l,n),n},set(l,n){t.has(l)?t.set(l,n):o(l,n)}}},as="!",Qs=r=>{const{separator:s,experimentalParseClassName:t}=r,a=s.length===1,o=s[0],l=s.length,n=i=>{const h=[];let u=0,d=0,f;for(let D=0;D<i.length;D++){let A=i[D];if(u===0){if(A===o&&(a||i.slice(D,D+l)===s)){h.push(i.slice(d,D)),d=D+l;continue}if(A==="/"){f=D;continue}}A==="["?u++:A==="]"&&u--}const k=h.length===0?i:i.substring(d),p=k.startsWith(as),x=p?k.substring(1):k,N=f&&f>d?f-d:void 0;return{modifiers:h,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:N}};return t?i=>t({className:i,parseClassName:n}):n},et=r=>{if(r.length<=1)return r;const s=[];let t=[];return r.forEach(a=>{a[0]==="["?(s.push(...t.sort(),a),t=[]):t.push(a)}),s.push(...t.sort()),s},st=r=>({cache:Zs(r.cacheSize),parseClassName:Qs(r),...Gs(r)}),tt=/\s+/,rt=(r,s)=>{const{parseClassName:t,getClassGroupId:a,getConflictingClassGroupIds:o}=s,l=[],n=r.trim().split(tt);let i="";for(let h=n.length-1;h>=0;h-=1){const u=n[h],{modifiers:d,hasImportantModifier:f,baseClassName:k,maybePostfixModifierPosition:p}=t(u);let x=!!p,N=a(x?k.substring(0,p):k);if(!N){if(!x){i=u+(i.length>0?" "+i:i);continue}if(N=a(k),!N){i=u+(i.length>0?" "+i:i);continue}x=!1}const D=et(d).join(":"),A=f?D+as:D,P=A+N;if(l.includes(P))continue;l.push(P);const q=o(N,x);for(let R=0;R<q.length;++R){const F=q[R];l.push(A+F)}i=u+(i.length>0?" "+i:i)}return i};function at(){let r=0,s,t,a="";for(;r<arguments.length;)(s=arguments[r++])&&(t=ns(s))&&(a&&(a+=" "),a+=t);return a}const ns=r=>{if(typeof r=="string")return r;let s,t="";for(let a=0;a<r.length;a++)r[a]&&(s=ns(r[a]))&&(t&&(t+=" "),t+=s);return t};function nt(r,...s){let t,a,o,l=n;function n(h){const u=s.reduce((d,f)=>f(d),r());return t=st(u),a=t.cache.get,o=t.cache.set,l=i,i(h)}function i(h){const u=a(h);if(u)return u;const d=rt(h,t);return o(h,d),d}return function(){return l(at.apply(null,arguments))}}const L=r=>{const s=t=>t[r]||[];return s.isThemeGetter=!0,s},os=/^\[(?:([a-z-]+):)?(.+)\]$/i,ot=/^\d+\/\d+$/,lt=new Set(["px","full","screen"]),it=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ct=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dt=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ut=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mt=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,te=r=>ie(r)||lt.has(r)||ot.test(r),ae=r=>ce(r,"length",wt),ie=r=>!!r&&!Number.isNaN(Number(r)),ye=r=>ce(r,"number",ie),ue=r=>!!r&&Number.isInteger(Number(r)),gt=r=>r.endsWith("%")&&ie(r.slice(0,-1)),U=r=>os.test(r),ne=r=>it.test(r),ht=new Set(["length","size","percentage"]),pt=r=>ce(r,ht,ls),xt=r=>ce(r,"position",ls),ft=new Set(["image","url"]),bt=r=>ce(r,ft,Ct),vt=r=>ce(r,"",jt),me=()=>!0,ce=(r,s,t)=>{const a=os.exec(r);return a?a[1]?typeof s=="string"?a[1]===s:s.has(a[1]):t(a[2]):!1},wt=r=>ct.test(r)&&!dt.test(r),ls=()=>!1,jt=r=>ut.test(r),Ct=r=>mt.test(r),yt=()=>{const r=L("colors"),s=L("spacing"),t=L("blur"),a=L("brightness"),o=L("borderColor"),l=L("borderRadius"),n=L("borderSpacing"),i=L("borderWidth"),h=L("contrast"),u=L("grayscale"),d=L("hueRotate"),f=L("invert"),k=L("gap"),p=L("gradientColorStops"),x=L("gradientColorStopPositions"),N=L("inset"),D=L("margin"),A=L("opacity"),P=L("padding"),q=L("saturate"),R=L("scale"),F=L("sepia"),I=L("skew"),O=L("space"),S=L("translate"),B=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",U,s],m=()=>[U,s],c=()=>["",te,ae],C=()=>["auto",ie,U],y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],b=()=>["solid","dashed","dotted","double","none"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",U],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[ie,U];return{cacheSize:500,separator:":",theme:{colors:[me],spacing:[te,ae],blur:["none","",ne,U],brightness:W(),borderColor:[r],borderRadius:["none","","full",ne,U],borderSpacing:m(),borderWidth:c(),contrast:W(),grayscale:j(),hueRotate:W(),invert:j(),gap:m(),gradientColorStops:[r],gradientColorStopPositions:[gt,ae],inset:_(),margin:_(),opacity:W(),padding:m(),saturate:W(),scale:W(),sepia:j(),skew:W(),space:m(),translate:m()},classGroups:{aspect:[{aspect:["auto","square","video",U]}],container:["container"],columns:[{columns:[ne]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...y(),U]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[N]}],"inset-x":[{"inset-x":[N]}],"inset-y":[{"inset-y":[N]}],start:[{start:[N]}],end:[{end:[N]}],top:[{top:[N]}],right:[{right:[N]}],bottom:[{bottom:[N]}],left:[{left:[N]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ue,U]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",U]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",ue,U]}],"grid-cols":[{"grid-cols":[me]}],"col-start-end":[{col:["auto",{span:["full",ue,U]},U]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[me]}],"row-start-end":[{row:["auto",{span:[ue,U]},U]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",U]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",U]}],gap:[{gap:[k]}],"gap-x":[{"gap-x":[k]}],"gap-y":[{"gap-y":[k]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[P]}],px:[{px:[P]}],py:[{py:[P]}],ps:[{ps:[P]}],pe:[{pe:[P]}],pt:[{pt:[P]}],pr:[{pr:[P]}],pb:[{pb:[P]}],pl:[{pl:[P]}],m:[{m:[D]}],mx:[{mx:[D]}],my:[{my:[D]}],ms:[{ms:[D]}],me:[{me:[D]}],mt:[{mt:[D]}],mr:[{mr:[D]}],mb:[{mb:[D]}],ml:[{ml:[D]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",U,s]}],"min-w":[{"min-w":[U,s,"min","max","fit"]}],"max-w":[{"max-w":[U,s,"none","full","min","max","fit","prose",{screen:[ne]},ne]}],h:[{h:[U,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[U,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[U,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[U,s,"auto","min","max","fit"]}],"font-size":[{text:["base",ne,ae]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ye]}],"font-family":[{font:[me]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",U]}],"line-clamp":[{"line-clamp":["none",ie,ye]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",te,U]}],"list-image":[{"list-image":["none",U]}],"list-style-type":[{list:["none","disc","decimal",U]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...b(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",te,ae]}],"underline-offset":[{"underline-offset":["auto",te,U]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:m()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",U]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",U]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...y(),xt]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",pt]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bt]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...b(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:b()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...b()]}],"outline-offset":[{"outline-offset":[te,U]}],"outline-w":[{outline:[te,ae]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:c()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[te,ae]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",ne,vt]}],"shadow-color":[{shadow:[me]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...G(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":G()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[a]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",ne,U]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[q]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[q]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[n]}],"border-spacing-x":[{"border-spacing-x":[n]}],"border-spacing-y":[{"border-spacing-y":[n]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",U]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",U]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",U]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[ue,U]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",U]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",U]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":m()}],"scroll-mx":[{"scroll-mx":m()}],"scroll-my":[{"scroll-my":m()}],"scroll-ms":[{"scroll-ms":m()}],"scroll-me":[{"scroll-me":m()}],"scroll-mt":[{"scroll-mt":m()}],"scroll-mr":[{"scroll-mr":m()}],"scroll-mb":[{"scroll-mb":m()}],"scroll-ml":[{"scroll-ml":m()}],"scroll-p":[{"scroll-p":m()}],"scroll-px":[{"scroll-px":m()}],"scroll-py":[{"scroll-py":m()}],"scroll-ps":[{"scroll-ps":m()}],"scroll-pe":[{"scroll-pe":m()}],"scroll-pt":[{"scroll-pt":m()}],"scroll-pr":[{"scroll-pr":m()}],"scroll-pb":[{"scroll-pb":m()}],"scroll-pl":[{"scroll-pl":m()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",U]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[te,ae,ye]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Nt=nt(yt);function J(...r){return Nt(Qe(r))}const Dt=({className:r,...s})=>e.jsx(js,{className:J("toaster group",r),toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s}),is=v.createContext(),St=()=>{const r=v.useContext(is);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r},kt=({children:r})=>{const[s,t]=v.useState(()=>{const o=localStorage.getItem("theme");return o||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});v.useEffect(()=>{localStorage.setItem("theme",s);const o=document.documentElement;s==="dark"?o.classList.add("dark"):o.classList.remove("dark")},[s]);const a=()=>{t(o=>o==="light"?"dark":"light")};return e.jsx(is.Provider,{value:{theme:s,toggleTheme:a},children:r})};const E=v.forwardRef(({className:r,...s},t)=>e.jsx("div",{ref:t,className:J("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s}));E.displayName="Card";const Q=v.forwardRef(({className:r,...s},t)=>e.jsx("div",{ref:t,className:J("flex flex-col space-y-1.5 p-6",r),...s}));Q.displayName="CardHeader";const ee=v.forwardRef(({className:r,...s},t)=>e.jsx("h3",{ref:t,className:J("text-2xl font-semibold leading-none tracking-tight",r),...s}));ee.displayName="CardTitle";const Rt=v.forwardRef(({className:r,...s},t)=>e.jsx("p",{ref:t,className:J("text-sm text-muted-foreground",r),...s}));Rt.displayName="CardDescription";const $=v.forwardRef(({className:r,...s},t)=>e.jsx("div",{ref:t,className:J("p-6 pt-0",r),...s}));$.displayName="CardContent";const Mt=v.forwardRef(({className:r,...s},t)=>e.jsx("div",{ref:t,className:J("flex items-center p-6 pt-0",r),...s}));Mt.displayName="CardFooter";const Ke=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Je=Qe,Me=(r,s)=>t=>{var a;if((s==null?void 0:s.variants)==null)return Je(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:o,defaultVariants:l}=s,n=Object.keys(o).map(u=>{const d=t==null?void 0:t[u],f=l==null?void 0:l[u];if(d===null)return null;const k=Ke(d)||Ke(f);return o[u][k]}),i=t&&Object.entries(t).reduce((u,d)=>{let[f,k]=d;return k===void 0||(u[f]=k),u},{}),h=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((u,d)=>{let{class:f,className:k,...p}=d;return Object.entries(p).every(x=>{let[N,D]=x;return Array.isArray(D)?D.includes({...l,...i}[N]):{...l,...i}[N]===D})?[...u,f,k]:u},[]);return Je(r,n,h,t==null?void 0:t.class,t==null?void 0:t.className)},It=Me("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),T=v.forwardRef(({className:r,variant:s,size:t,...a},o)=>e.jsx("button",{className:J(It({variant:s,size:t,className:r})),ref:o,...a}));T.displayName="Button";const se=({title:r,value:s,previousValue:t,format:a="number",icon:o,trend:l=null,subtitle:n=null})=>{const i=x=>a==="currency"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x):a==="percentage"?`${parseFloat(x).toFixed(2)}%`:a==="decimal"?parseFloat(x).toFixed(2):new Intl.NumberFormat("en-US").format(x),u=(()=>!t||t===0?null:((s-t)/t*100).toFixed(1))(),d=u>0,f=u<0,k=()=>d?e.jsx(he,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):f?e.jsx(Cs,{className:"h-4 w-4 text-red-600 dark:text-red-400"}):e.jsx(ys,{className:"h-4 w-4 text-muted-foreground"}),p=()=>d?"text-green-600 dark:text-green-400":f?"text-red-600 dark:text-red-400":"text-muted-foreground";return e.jsxs(E,{className:"hover:shadow-lg transition-shadow duration-200",children:[e.jsxs(Q,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:r}),o&&e.jsx(o,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs($,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i(s)}),n&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n}),u!==null&&e.jsxs("div",{className:`flex items-center text-xs mt-2 ${p()}`,children:[k(),e.jsxs("span",{className:"ml-1",children:[Math.abs(u),"% from last period"]})]}),l&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l})]})]})},X=v.forwardRef(({className:r,type:s,...t},a)=>e.jsx("input",{type:s,className:J("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:a,...t}));X.displayName="Input";const Ie=v.forwardRef(({className:r,...s},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:J("w-full caption-bottom text-sm",r),...s})}));Ie.displayName="Table";const Ue=v.forwardRef(({className:r,...s},t)=>e.jsx("thead",{ref:t,className:J("[&_tr]:border-b",r),...s}));Ue.displayName="TableHeader";const Ae=v.forwardRef(({className:r,...s},t)=>e.jsx("tbody",{ref:t,className:J("[&_tr:last-child]:border-0",r),...s}));Ae.displayName="TableBody";const Ut=v.forwardRef(({className:r,...s},t)=>e.jsx("tfoot",{ref:t,className:J("bg-primary font-medium text-primary-foreground",r),...s}));Ut.displayName="TableFooter";const pe=v.forwardRef(({className:r,...s},t)=>e.jsx("tr",{ref:t,className:J("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s}));pe.displayName="TableRow";const H=v.forwardRef(({className:r,...s},t)=>e.jsx("th",{ref:t,className:J("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s}));H.displayName="TableHead";const K=v.forwardRef(({className:r,...s},t)=>e.jsx("td",{ref:t,className:J("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s}));K.displayName="TableCell";const At=v.forwardRef(({className:r,...s},t)=>e.jsx("caption",{ref:t,className:J("mt-4 text-sm text-muted-foreground",r),...s}));At.displayName="TableCaption";const Tt=({data:r,onDataUpdate:s,title:t="Manual Entry Data"})=>{const[a,o]=v.useState(new Set),[l,n]=v.useState({}),[i,h]=v.useState("date"),[u,d]=v.useState("desc"),[f,k]=v.useState(null),p=v.useRef(null);v.useEffect(()=>{const m=c=>{p.current&&!p.current.contains(c.target)&&a.size>0&&(o(new Set),n({}))};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[a.size]);const N=[...r.filter(m=>m.meetings>0||m.shows>0||m.offersMade>0||m.closes>0||m.newCloses>0||m.recurringCloses>0||m.cashCollected>0||m.revenue>0)].sort((m,c)=>{const C=m[i]||0,y=c[i]||0;return i==="date"?u==="asc"?new Date(C)-new Date(y):new Date(y)-new Date(C):u==="asc"?C-y:y-C}),D=m=>{i===m?d(c=>c==="asc"?"desc":"asc"):(h(m),d("desc"))},A=m=>{const c=r.find(C=>C.date===m);c&&(o(C=>new Set([...C,m])),n(C=>({...C,[m]:{meetings:c.meetings||0,shows:c.shows||0,offersMade:c.offersMade||0,closes:c.closes||0,newCloses:c.newCloses||0,recurringCloses:c.recurringCloses||0,cashCollected:c.cashCollected||0,revenue:c.revenue||c.totalRevenue||0}})))},P=m=>{o(c=>{const C=new Set(c);return C.delete(m),C}),n(c=>{const C={...c};return delete C[m],C})},q=m=>{k(m)},R=()=>{const m=f;if(!m)return;s&&s({date:m,meetings:0,shows:0,offersMade:0,closes:0,newCloses:0,recurringCloses:0,cashCollected:0,revenue:0,totalRevenue:0,newRevenue:0,recurringRevenue:0,isEdit:!0,isDelete:!0}),k(null),re.success("Record deleted successfully!")},F=()=>{k(null)},I=m=>{const c=l[m];if(!c)return;const C=parseFloat(c.cashCollected)||0,y=parseFloat(c.revenue)||0,b=parseInt(c.newCloses)||0,G=parseInt(c.recurringCloses)||0,z=parseInt(c.closes)||0;if(C>y&&y>0){re.error("Cash collected cannot exceed total revenue");return}if(z>0&&b+G>0&&b+G!==z){re.error("New closes + recurring closes must equal total closes");return}const j={date:m,meetings:parseInt(c.meetings)||0,shows:parseInt(c.shows)||0,offersMade:parseInt(c.offersMade)||0,closes:parseInt(c.closes)||0,newCloses:parseInt(c.newCloses)||0,recurringCloses:parseInt(c.recurringCloses)||0,cashCollected:parseFloat(c.cashCollected)||0,revenue:parseFloat(c.revenue)||0,totalRevenue:parseFloat(c.revenue)||0,newRevenue:parseFloat(c.revenue)||0,recurringRevenue:0,isEdit:!0};j.closes===0&&(j.newCloses>0||j.recurringCloses>0)&&(j.closes=j.newCloses+j.recurringCloses),j.closes>0&&j.newCloses===0&&j.recurringCloses===0&&(j.newCloses=j.closes,j.recurringCloses=0),s&&s(j),P(m),re.success("Data updated successfully!")},O=(m,c,C)=>{n(y=>({...y,[m]:{...y[m],[c]:C}}))},S=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(m||0),B=m=>new Date(m).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),M=m=>i!==m?"":u==="asc"?" ↑":" ↓",_=(m,c,C)=>{var b;if(C){const G=((b=l[m.date])==null?void 0:b[c])||"",z=c==="cashCollected"||c==="revenue";return e.jsx(X,{type:"number",min:"0",step:z?"0.01":"1",value:G,onChange:j=>O(m.date,c,j.target.value),className:"w-20 h-8 text-xs"})}const y=m[c]||0;return c==="cashCollected"||c==="revenue"?S(y):y};return e.jsxs(E,{children:[e.jsxs(Q,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-5 w-5 text-muted-foreground"}),t]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Editable table showing all manual data entries. Click Edit to modify values."})]}),e.jsxs($,{children:[N.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("p",{children:"No manual data entries found."}),e.jsx("p",{className:"text-xs mt-1",children:"Add data using the Manual Data Entry section above."})]}):e.jsx("div",{className:"overflow-x-auto",ref:p,children:e.jsxs(Ie,{children:[e.jsx(Ue,{children:e.jsxs(pe,{children:[e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50 min-w-[100px]",onClick:()=>D("date"),children:["Date ",M("date")]}),e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50 text-center",onClick:()=>D("meetings"),children:["Meetings ",M("meetings")]}),e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50 text-center",onClick:()=>D("shows"),children:["Shows ",M("shows")]}),e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50 text-center",onClick:()=>D("offersMade"),children:["Offers ",M("offersMade")]}),e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50 text-center",onClick:()=>D("closes"),children:["Total Closes ",M("closes")]}),e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50 text-center",onClick:()=>D("newCloses"),children:["New Clients ",M("newCloses")]}),e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50 text-center",onClick:()=>D("recurringCloses"),children:["Recurring ",M("recurringCloses")]}),e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50 text-center",onClick:()=>D("cashCollected"),children:["Cash Collected ",M("cashCollected")]}),e.jsxs(H,{className:"cursor-pointer hover:bg-muted/50 text-center",onClick:()=>D("revenue"),children:["Revenue ",M("revenue")]}),e.jsx(H,{className:"text-center",children:"Actions"})]})}),e.jsx(Ae,{children:N.map(m=>{const c=a.has(m.date);return e.jsxs(pe,{children:[e.jsx(K,{className:"font-medium",children:B(m.date)}),e.jsx(K,{className:"text-center",children:_(m,"meetings",c)}),e.jsx(K,{className:"text-center",children:_(m,"shows",c)}),e.jsx(K,{className:"text-center",children:_(m,"offersMade",c)}),e.jsx(K,{className:"text-center",children:_(m,"closes",c)}),e.jsx(K,{className:"text-center",children:_(m,"newCloses",c)}),e.jsx(K,{className:"text-center",children:_(m,"recurringCloses",c)}),e.jsx(K,{className:"text-center",children:_(m,"cashCollected",c)}),e.jsx(K,{className:"text-center",children:_(m,"revenue",c)}),e.jsx(K,{className:"text-center",children:c?e.jsxs("div",{className:"flex gap-1 justify-center",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>I(m.date),className:"h-8 w-8 p-0",children:e.jsx(qe,{className:"h-4 w-4 text-green-600"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>q(m.date),className:"h-8 w-8 p-0",children:e.jsx(Ns,{className:"h-4 w-4 text-red-600"})})]}):e.jsx(T,{variant:"outline",size:"sm",onClick:()=>A(m.date),className:"h-8 w-8 p-0",children:e.jsx(Te,{className:"h-4 w-4 text-muted-foreground"})})})]},m.date)})})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-background border rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Delete Record"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["Are you sure you want to delete the record for ",new Date(f).toLocaleDateString(),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(T,{variant:"outline",onClick:F,children:"Cancel"}),e.jsx(T,{variant:"destructive",onClick:R,children:"Delete"})]})]})})]})]})};function We(r,s){if(typeof r=="function")return r(s);r!=null&&(r.current=s)}function Ot(...r){return s=>{let t=!1;const a=r.map(o=>{const l=We(o,s);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let o=0;o<a.length;o++){const l=a[o];typeof l=="function"?l():We(r[o],null)}}}}function Ft(r){const s=_t(r),t=v.forwardRef((a,o)=>{const{children:l,...n}=a,i=v.Children.toArray(l),h=i.find(Pt);if(h){const u=h.props.children,d=i.map(f=>f===h?v.Children.count(u)>1?v.Children.only(null):v.isValidElement(u)?u.props.children:null:f);return e.jsx(s,{...n,ref:o,children:v.isValidElement(u)?v.cloneElement(u,void 0,d):null})}return e.jsx(s,{...n,ref:o,children:l})});return t.displayName=`${r}.Slot`,t}function _t(r){const s=v.forwardRef((t,a)=>{const{children:o,...l}=t;if(v.isValidElement(o)){const n=Et(o),i=zt(l,o.props);return o.type!==v.Fragment&&(i.ref=a?Ot(a,n):n),v.cloneElement(o,i)}return v.Children.count(o)>1?v.Children.only(null):null});return s.displayName=`${r}.SlotClone`,s}var Lt=Symbol("radix.slottable");function Pt(r){return v.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Lt}function zt(r,s){const t={...s};for(const a in s){const o=r[a],l=s[a];/^on[A-Z]/.test(a)?o&&l?t[a]=(...i)=>{const h=l(...i);return o(...i),h}:o&&(t[a]=o):a==="style"?t[a]={...o,...l}:a==="className"&&(t[a]=[o,l].filter(Boolean).join(" "))}return{...r,...t}}function Et(r){var a,o;let s=(a=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:a.get,t=s&&"isReactWarning"in s&&s.isReactWarning;return t?r.ref:(s=(o=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:o.get,t=s&&"isReactWarning"in s&&s.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var $t=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vt=$t.reduce((r,s)=>{const t=Ft(`Primitive.${s}`),a=v.forwardRef((o,l)=>{const{asChild:n,...i}=o,h=n?t:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...i,ref:l})});return a.displayName=`Primitive.${s}`,{...r,[s]:a}},{}),Bt="Label",cs=v.forwardRef((r,s)=>e.jsx(Vt.label,{...r,ref:s,onMouseDown:t=>{var o;t.target.closest("button, input, select, textarea")||((o=r.onMouseDown)==null||o.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));cs.displayName=Bt;var ds=cs;const Kt=Me("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Y=v.forwardRef(({className:r,...s},t)=>e.jsx(ds,{ref:t,className:J(Kt(),r),...s}));Y.displayName=ds.displayName;const Jt=({onDataSubmit:r})=>{const[s,t]=v.useState({date:new Date().toISOString().split("T")[0],meetings:"",shows:"",offersMade:"",closes:"",cashCollected:"",revenue:"",isNewClient:!0,isRecurringClient:!1}),a=(l,n)=>{t(i=>({...i,[l]:n}))},o=l=>{if(l.preventDefault(),!(s.meetings||s.shows||s.offersMade||s.closes||s.cashCollected||s.revenue)){re.error("Please fill in at least one field");return}const i=parseFloat(s.cashCollected)||0,h=parseFloat(s.revenue)||0;if(i>h&&h>0){re.error("Cash collected cannot exceed total revenue");return}if((parseInt(s.closes)||0)>0&&!s.isNewClient&&!s.isRecurringClient){re.error("Please select if closes are new clients, recurring clients, or both");return}const d={meetings:parseInt(s.meetings)||0,shows:parseInt(s.shows)||0,offersMade:parseInt(s.offersMade)||0,closes:parseInt(s.closes)||0,cashCollected:parseFloat(s.cashCollected)||0,revenue:parseFloat(s.revenue)||0};d.closes>0?s.isNewClient&&s.isRecurringClient?(d.newCloses=Math.ceil(d.closes/2),d.recurringCloses=Math.floor(d.closes/2)):s.isNewClient?(d.newCloses=d.closes,d.recurringCloses=0):s.isRecurringClient?(d.newCloses=0,d.recurringCloses=d.closes):(d.newCloses=d.closes,d.recurringCloses=0):(d.newCloses=0,d.recurringCloses=0);const f={};Object.keys(d).forEach(p=>{d[p]>0&&(f[p]=d[p])});const k={date:s.date,...f,totalRevenue:f.revenue||0,newRevenue:f.revenue||0,recurringRevenue:0,isEdit:!1};r&&r(k),re.success("Data added successfully!"),t({date:new Date().toISOString().split("T")[0],meetings:"",shows:"",offersMade:"",closes:"",cashCollected:"",revenue:"",isNewClient:!0,isRecurringClient:!1})};return e.jsxs(E,{children:[e.jsx(Q,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5 text-muted-foreground"}),"Manual Data Entry"]})}),e.jsxs($,{children:[e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Y,{htmlFor:"date",className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),"Date"]}),e.jsx("div",{className:"w-fit",children:e.jsx(X,{id:"date",type:"date",value:s.date,onChange:l=>a("date",l.target.value),required:!0})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Sales Activity"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"meetings",children:"Meetings"}),e.jsx(X,{id:"meetings",type:"number",min:"0",placeholder:"# of meetings",value:s.meetings,onChange:l=>a("meetings",l.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"shows",children:"Shows"}),e.jsx(X,{id:"shows",type:"number",min:"0",placeholder:"# of shows",value:s.shows,onChange:l=>a("shows",l.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"offersMade",children:"Offers Made"}),e.jsx(X,{id:"offersMade",type:"number",min:"0",placeholder:"# of offers",value:s.offersMade,onChange:l=>a("offersMade",l.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"closes",children:"Closes"}),e.jsx(X,{id:"closes",type:"number",min:"0",placeholder:"# of closes",value:s.closes,onChange:l=>a("closes",l.target.value)})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Revenue Tracking (Optional)"}),parseInt(s.closes)>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Client Type for Closes"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.isNewClient,onChange:l=>a("isNewClient",l.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"New Clients"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.isRecurringClient,onChange:l=>a("isRecurringClient",l.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Recurring Clients"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select client type(s) for accurate CPA calculation. New clients affect Cost Per Acquisition."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"revenue",children:"Total Revenue"}),e.jsx(X,{id:"revenue",type:"number",min:"0",step:"0.01",placeholder:"$0.00",value:s.revenue,onChange:l=>a("revenue",l.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Full deal value from all closes today"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"cashCollected",children:"Cash Collected"}),e.jsx(X,{id:"cashCollected",type:"number",min:"0",step:"0.01",placeholder:"$0.00",value:s.cashCollected,onChange:l=>a("cashCollected",l.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Amount actually received today"})]})]})]})]}),e.jsxs(T,{type:"submit",className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(qe,{className:"h-4 w-4"}),"Save Data"]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"How to Use"}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"All fields are optional"})," - fill in only what you have data for"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Adding:"})," Blank fields = 0, data gets added to existing totals"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Editing:"})," Use the Editable Data Table below to modify existing entries"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Meetings:"})," Number of meetings/calls you had"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Shows:"})," Number of people who actually showed up to meetings"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Offers Made:"})," Number of formal offers/proposals presented"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Closes:"})," Number of deals closed/signed"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Client Type Checkboxes:"})," Select if closes are new or recurring clients (affects CPA)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Total Revenue:"})," Full value of all deals (e.g., $3,000 for a $3k deal)"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Cash Collected:"})," Actual money received (can be partial)"]})]})]})]})]})},Wt=Me("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function us({className:r,variant:s,...t}){return e.jsx("div",{className:J(Wt({variant:s}),r),...t})}const Gt=({campaigns:r,onCampaignClick:s,showAllCampaigns:t})=>{const[a,o]=v.useState("spend"),[l,n]=v.useState("desc"),i=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),h=x=>new Intl.NumberFormat("en-US").format(x),u=(x,N)=>N>0?x/N:0,d=x=>{a===x?n(l==="asc"?"desc":"asc"):(o(x),n("desc"))},f=[...r].sort((x,N)=>{let D,A;return a==="costPerDM"?(D=u(x.spend,x.inboundDMs),A=u(N.spend,N.inboundDMs)):(D=x[a],A=N[a]),l==="asc"?D>A?1:-1:D<A?1:-1}),k=x=>{const N={Active:{variant:"default",className:"bg-green-100 text-green-800 border-green-200"},Inactive:{variant:"secondary",className:"bg-red-100 text-red-800 border-red-200"},Paused:{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200"},Ended:{variant:"outline",className:"bg-gray-100 text-gray-800 border-gray-200"},recently_completed:{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200"}},D=N[x]||N.Active;return e.jsx(us,{variant:D.variant,className:D.className,children:x})},p=({field:x,children:N})=>e.jsx(H,{className:"cursor-pointer hover:bg-muted select-none",onClick:()=>d(x),children:e.jsxs("div",{className:"flex items-center gap-1",children:[N,e.jsx(Ss,{className:"h-3 w-3"})]})});return e.jsxs(E,{children:[e.jsx(Q,{children:e.jsxs(ee,{children:["Campaign Performance ",t?"(All Campaigns)":"(Active Only)"]})}),e.jsxs($,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ie,{children:[e.jsx(Ue,{children:e.jsxs(pe,{children:[e.jsx(H,{children:"Campaign Name"}),e.jsx(H,{children:"Status"}),e.jsx(p,{field:"spend",children:"Spend"}),e.jsx(p,{field:"inboundDMs",children:"Inbound DMs"}),e.jsx(p,{field:"costPerDM",children:"Cost/DM"}),e.jsx(p,{field:"impressions",children:"Impressions"}),e.jsx(p,{field:"reach",children:"Reach"}),e.jsx(p,{field:"clicks",children:"Clicks"}),e.jsx(H,{children:"Actions"})]})}),e.jsx(Ae,{children:f.map(x=>e.jsxs(pe,{className:"hover:bg-muted/50 cursor-pointer",onClick:()=>s&&s(x),children:[e.jsx(K,{className:"font-medium max-w-xs",children:e.jsx("div",{className:"truncate",title:x.name,children:x.name})}),e.jsx(K,{children:k(x.status)}),e.jsx(K,{className:"font-mono",children:i(x.spend)}),e.jsx(K,{className:"text-center font-semibold",children:x.inboundDMs}),e.jsx(K,{className:"font-mono",children:i(u(x.spend,x.inboundDMs))}),e.jsx(K,{children:h(x.impressions)}),e.jsx(K,{children:h(x.reach)}),e.jsx(K,{children:h(x.clicks)}),e.jsx(K,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(T,{variant:"ghost",size:"sm",children:e.jsx(Xe,{className:"h-3 w-3"})}),e.jsx(T,{variant:"ghost",size:"sm",children:e.jsx(Ds,{className:"h-3 w-3"})})]})})]},x.id))})]})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Showing ",r.length," campaign",r.length!==1?"s":""]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:["Total Spend: ",e.jsx("span",{className:"font-semibold",children:i(r.reduce((x,N)=>x+N.spend,0))})]}),e.jsxs("div",{children:["Total DMs: ",e.jsx("span",{className:"font-semibold",children:r.reduce((x,N)=>x+N.inboundDMs,0)})]})]})]})]})]})};class qt{constructor(){this.errors=[],this.warnings=[],this.stats={totalRows:0,validRows:0,summaryRowsRemoved:0,boostedPostsRemoved:0,invalidRowsRemoved:0}}async processCsv(s){try{this.errors=[],this.warnings=[],this.stats={totalRows:0,validRows:0,summaryRowsRemoved:0,boostedPostsRemoved:0,invalidRowsRemoved:0};const{headers:t,rows:a}=this.parseCSV(s);this.stats.totalRows=a.length,this.validateColumns(t);const o=this.cleanRows(a,t);return{success:!0,data:this.transformData(o,t),stats:this.stats,errors:this.errors,warnings:this.warnings}}catch(t){return console.error("❌ CSV processing failed:",t),{success:!1,error:t.message,stats:this.stats,errors:this.errors,warnings:this.warnings}}}parseCSV(s){const t=s.split(`
`).filter(n=>n.trim());if(t.length<2)throw new Error("CSV file must have at least a header row and one data row");const a=n=>{const i=[];let h="",u=!1;for(let d=0;d<n.length;d++){const f=n[d],k=n[d+1];f==='"'?u&&k==='"'?(h+='"',d++):u=!u:f===","&&!u?(i.push(h.trim()),h=""):h+=f}return i.push(h.trim()),i},o=a(t[0]).map(n=>n.replace(/"/g,"").trim()),l=t.slice(1).map(n=>{const i=a(n),h={};return o.forEach((u,d)=>{h[u]=i[d]?i[d].replace(/"/g,"").trim():""}),h});return{headers:o,rows:l}}validateColumns(s){const a=["Reporting starts","Campaign name","Campaign Delivery","Amount spent (USD)","Results","Result indicator"].filter(o=>!s.some(l=>l.toLowerCase().includes(o.toLowerCase())));if(a.length>0)throw new Error(`Missing required columns: ${a.join(", ")}`)}cleanRows(s,t){const a=[];for(const o of s){const l=o["Campaign name"]||"",n=o["Campaign Delivery"]||"",i=o["Attribution setting"]||"",h=o["Reporting starts"]||"",u=o["Amount spent (USD)"]||"";if(!h||!h.match(/^\d{4}-\d{2}-\d{2}$/)){this.stats.invalidRowsRemoved++,this.warnings.push(`Skipped row with invalid date: ${h}`);continue}if(!l||l.trim()===""||n==="0"||i==="Multiple attribution settings"){this.stats.summaryRowsRemoved++;continue}if(l.startsWith("Instagram post:")){this.stats.boostedPostsRemoved++;continue}const d=parseFloat(u);(isNaN(d)||d<0)&&(o["Amount spent (USD)"]="0"),a.push(o)}return this.stats.validRows=a.length,a}transformData(s,t){var f,k;const a=new Map,o=new Map,l=new Map,n=(p,x)=>{for(const N of x){const D=t.find(A=>A.toLowerCase().includes(N.toLowerCase()));if(D&&p[D])return p[D]}return""};for(const p of s){const x=p["Reporting starts"],N=p["Campaign name"],D=p["Campaign Delivery"]||"",A=parseFloat(p["Amount spent (USD)"]||0),P=parseInt(p.Results||0),q=p["Result indicator"]||"",R=parseInt(n(p,["Impressions"])||0),F=parseInt(n(p,["Link clicks","Clicks"])||0),I=parseInt(n(p,["Reach"])||0);let O=0;q.includes("messaging_conversation_started")&&!q.includes("link_click")&&(O=P);const S=D.toLowerCase()==="active",B=S?"Active":D.toLowerCase()==="inactive"?"Inactive":D||"Unknown";a.has(x)||a.set(x,{date:x,activeSpend:0,allSpend:0,activeDMs:0,allDMs:0,activeImpressions:0,allImpressions:0,activeClicks:0,allClicks:0,activeReach:0,allReach:0,meetings:0,closes:0,cashCollected:0,recurringRevenue:0,newRevenue:0,totalRevenue:0});const M=a.get(x);M.allSpend+=A,M.allDMs+=O,M.allImpressions+=R,M.allClicks+=F,M.allReach=Math.max(M.allReach,I),S&&(M.activeSpend+=A,M.activeDMs+=O,M.activeImpressions+=R,M.activeClicks+=F,M.activeReach=Math.max(M.activeReach,I)),l.has(N)||l.set(N,{id:l.size+1,name:N,status:B,spend:0,inboundDMs:0,impressions:0,reach:0,clicks:0});const _=l.get(N);if(_.spend+=A,_.inboundDMs+=O,_.impressions+=R,_.reach=Math.max(_.reach,I),_.clicks+=F,S){o.has(N)||o.set(N,{..._,spend:0,inboundDMs:0,impressions:0,clicks:0,reach:0});const m=o.get(N);m.spend+=A,m.inboundDMs+=O,m.impressions+=R,m.reach=Math.max(m.reach,I),m.clicks+=F}}const i=Array.from(a.values()).sort((p,x)=>new Date(p.date)-new Date(x.date)),h=Array.from(o.values()),u=Array.from(l.values()),d=this.calculateTotals(i,h,u);return{dailyData:i,campaigns:h,allCampaigns:u,currentMetrics:d.active,allCampaignsMetrics:d.all,summary:{dateRange:{start:((f=i[0])==null?void 0:f.date)||null,end:((k=i[i.length-1])==null?void 0:k.date)||null},totalSpend:{active:d.active.totalSpend,all:d.all.totalSpend},totalDMs:{active:d.active.inboundDMs,all:d.all.inboundDMs}}}}calculateTotals(s,t,a){const o={totalSpend:s.reduce((n,i)=>n+i.activeSpend,0),inboundDMs:s.reduce((n,i)=>n+i.activeDMs,0),impressions:s.reduce((n,i)=>n+i.activeImpressions,0),clicks:s.reduce((n,i)=>n+i.activeClicks,0),reach:Math.max(...s.map(n=>n.activeReach).concat([0])),meetings:s.reduce((n,i)=>n+i.meetings,0),closes:s.reduce((n,i)=>n+i.closes,0),newCloses:s.reduce((n,i)=>n+(i.newCloses||0),0),recurringCloses:s.reduce((n,i)=>n+(i.recurringCloses||0),0),cashCollected:s.reduce((n,i)=>n+i.cashCollected,0),recurringRevenue:s.reduce((n,i)=>n+i.recurringRevenue,0),newRevenue:s.reduce((n,i)=>n+i.newRevenue,0),totalRevenue:s.reduce((n,i)=>n+i.totalRevenue,0)},l={totalSpend:s.reduce((n,i)=>n+i.allSpend,0),inboundDMs:s.reduce((n,i)=>n+i.allDMs,0),impressions:s.reduce((n,i)=>n+i.allImpressions,0),clicks:s.reduce((n,i)=>n+i.allClicks,0),reach:Math.max(...s.map(n=>n.allReach).concat([0])),meetings:s.reduce((n,i)=>n+i.meetings,0),closes:s.reduce((n,i)=>n+i.closes,0),newCloses:s.reduce((n,i)=>n+(i.newCloses||0),0),recurringCloses:s.reduce((n,i)=>n+(i.recurringCloses||0),0),cashCollected:s.reduce((n,i)=>n+i.cashCollected,0),recurringRevenue:s.reduce((n,i)=>n+i.recurringRevenue,0),newRevenue:s.reduce((n,i)=>n+i.newRevenue,0),totalRevenue:s.reduce((n,i)=>n+i.totalRevenue,0)};return[o,l].forEach(n=>{n.salesBooked=n.closes,n.costPerDM=n.inboundDMs>0?n.totalSpend/n.inboundDMs:0,n.costPerAcquisition=n.newCloses>0?n.totalSpend/n.newCloses:n.closes>0?n.totalSpend/n.closes:0,n.costPerMeeting=n.meetings>0?n.totalSpend/n.meetings:0,n.ctr=n.impressions>0?n.clicks/n.impressions*100:0,n.meetingToCloseRate=n.meetings>0?n.closes/n.meetings*100:0,n.dmToMeetingRate=n.inboundDMs>0?n.meetings/n.inboundDMs*100:0}),{active:o,all:l}}}const Ht=({onDataImport:r,onClose:s})=>{var F;const[t,a]=v.useState(null),[o,l]=v.useState(null),[n,i]=v.useState(null);v.useState({});const[h,u]=v.useState(!1),[d,f]=v.useState(null),[k,p]=v.useState(null),x=I=>{const O=I.split(`
`).filter(M=>M.trim()),S=O[0].split(",").map(M=>M.trim().replace(/"/g,"")),B=O.slice(1).map(M=>{const _=M.split(",").map(c=>c.trim().replace(/"/g,"")),m={};return S.forEach((c,C)=>{m[c]=_[C]||""}),m});return{headers:S,rows:B}},N=v.useCallback(I=>{if(!I)return;if(!I.name.endsWith(".csv")){f("Please upload a CSV file");return}a(I),f(null);const O=new FileReader;O.onload=S=>{try{const B=S.target.result,M=x(B);l(M),i(M.rows.slice(0,5))}catch(B){f("Error parsing CSV file: "+B.message)}},O.readAsText(I)},[]),D=v.useCallback(I=>{I.preventDefault();const O=I.dataTransfer.files[0];N(O)},[N]),A=v.useCallback(I=>{I.preventDefault()},[]),P=async()=>{if(!t)return null;const I=new FileReader;return new Promise((O,S)=>{I.onload=async B=>{try{const M=B.target.result,m=await new qt().processCsv(M);m.success?(p(m.stats),O(m.data)):S(new Error(m.error))}catch(M){S(M)}},I.readAsText(t)})},q=async()=>{u(!0),f(null);try{const I=await P();I&&(await r(I),s())}catch(I){console.error("❌ CSV import failed:",I),f("Error importing data: "+I.message)}finally{u(!1)}},R=()=>{const O=[["Reporting starts","Reporting ends","Campaign name","Campaign Delivery","Attribution setting","Results","Result indicator","Reach","Impressions","Link clicks","Amount spent (USD)"],["2025-06-20","2025-06-20","DFY Content Image","active","7-day click or 1-day view","3","actions:onsite_conversion.messaging_conversation_started_7d","2009","2838","8","94.98"],["2025-06-19","2025-06-19","DFY Content Image","active","7-day click or 1-day view","3","actions:onsite_conversion.messaging_conversation_started_7d","2135","2989","7","90.36"],["2025-06-18","2025-06-18","DFY Content Image","active","7-day click or 1-day view","3","actions:onsite_conversion.messaging_conversation_started_7d","1707","2158","5","61.03"]].map(_=>_.map(m=>`"${m}"`).join(",")).join(`
`),S=new Blob([O],{type:"text/csv"}),B=window.URL.createObjectURL(S),M=document.createElement("a");M.href=B,M.download="facebook-ads-sample.csv",M.click(),window.URL.revokeObjectURL(B)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(E,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Q,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Import Facebook Ads Data"]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:s,children:e.jsx(Ne,{className:"h-4 w-4"})})]})}),e.jsxs($,{className:"space-y-6",children:[!t&&e.jsxs("div",{children:[e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-muted-foreground transition-colors cursor-pointer",onDrop:D,onDragOver:A,onClick:()=>document.getElementById("file-upload").click(),children:[e.jsx(be,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Upload Facebook Ads CSV"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Drag and drop your CSV file here, or click to browse"}),e.jsx(T,{variant:"outline",children:"Choose File"}),e.jsx("input",{id:"file-upload",type:"file",accept:".csv",className:"hidden",onChange:I=>N(I.target.files[0])})]}),e.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ks,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Need a sample CSV format?"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Download a sample CSV to see the expected format for Facebook Ads data."}),e.jsxs(T,{variant:"outline",size:"sm",onClick:R,children:[e.jsx(De,{className:"h-3 w-3 mr-1"}),"Download Sample CSV"]})]})]}),t&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:t.name}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[(t.size/1024).toFixed(1)," KB • ",((F=o==null?void 0:o.rows)==null?void 0:F.length)||0," rows"]})]})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>{a(null),l(null),i(null),f(null),p(null)},children:e.jsx(Ne,{className:"h-4 w-4"})})]}),d&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[e.jsx(Ms,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsx("p",{className:"text-red-900 dark:text-red-100",children:d})]}),o&&k&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Data Processing Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total Rows"}),e.jsx("div",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:k.totalRows})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Valid Rows"}),e.jsx("div",{className:"text-lg font-semibold text-green-900 dark:text-green-100",children:k.validRows})]}),e.jsxs("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Summary Rows Removed"}),e.jsx("div",{className:"text-lg font-semibold text-orange-900 dark:text-orange-100",children:k.summaryRowsRemoved})]}),e.jsxs("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Boosted Posts Removed"}),e.jsx("div",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100",children:k.boostedPostsRemoved})]})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"The CSV processor automatically detects and cleans your Facebook Ads data, removing summary rows and boosted posts to ensure accurate metrics."})]}),n&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Data Preview"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border border-border rounded-lg",children:[e.jsx("thead",{className:"bg-muted",children:e.jsx("tr",{children:o.headers.slice(0,6).map(I=>e.jsx("th",{className:"p-2 text-left text-sm font-medium border-b border-border text-foreground",children:I},I))})}),e.jsx("tbody",{children:n.map((I,O)=>e.jsx("tr",{className:"border-b border-border",children:o.headers.slice(0,6).map(S=>e.jsx("td",{className:"p-2 text-sm text-foreground",children:I[S]||"-"},S))},O))})]})}),o.rows.length>5&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Showing 5 of ",o.rows.length," rows"]})]}),o&&e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-border",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ready to process and import ",o.rows.length," rows of Facebook Ads data"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Data will be automatically cleaned and processed. Manual entries will be preserved."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(T,{onClick:q,disabled:h,children:h?"Processing & Importing...":"Import Data"})]})]})]})]})})},Yt=({campaign:r,onClose:s,campaignDailyData:t=[]})=>{if(!r)return null;const a=t.length,o=t.filter(p=>p.spend>0).length,l=t.filter(p=>p.inboundDMs>0).length,n=a>0?r.spend/a:0,i=a>0?r.inboundDMs/a:0,h=t.map(p=>({date:new Date(p.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),spend:p.spend,inboundDMs:p.inboundDMs,impressions:p.impressions/1e3,clicks:p.clicks})),u=p=>{const x={Active:{variant:"default",className:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900 dark:text-green-100 dark:border-green-800"},Inactive:{variant:"secondary",className:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900 dark:text-red-100 dark:border-red-800"},Paused:{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900 dark:text-yellow-100 dark:border-yellow-800"}},N=x[p]||x.Active;return e.jsx(us,{variant:N.variant,className:N.className,children:p})},d=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p||0),f=p=>new Intl.NumberFormat("en-US").format(p||0),k=(p,x)=>x>0?p/x:0;return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-background border rounded-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-background border-b p-6 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:r.name}),u(r.status)]}),e.jsx("p",{className:"text-muted-foreground",children:"Campaign Performance Analysis"})]}),e.jsx(T,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:e.jsx(Ne,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Spend"}),e.jsx("p",{className:"text-2xl font-bold",children:d(r.spend)})]}),e.jsx(fe,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(E,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Inbound DMs"}),e.jsx("p",{className:"text-2xl font-bold",children:f(r.inboundDMs)})]}),e.jsx(Ze,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(E,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Cost per DM"}),e.jsx("p",{className:"text-2xl font-bold",children:d(k(r.spend,r.inboundDMs))})]}),e.jsx(Se,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(E,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Impressions"}),e.jsx("p",{className:"text-2xl font-bold",children:f(r.impressions)})]}),e.jsx(Xe,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(E,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Reach"}),e.jsx("p",{className:"text-xl font-semibold",children:f(r.reach)})]}),e.jsx(ve,{className:"h-6 w-6 text-blue-500"})]})})}),e.jsx(E,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Clicks"}),e.jsx("p",{className:"text-xl font-semibold",children:f(r.clicks)})]}),e.jsx(he,{className:"h-6 w-6 text-green-500"})]})})}),e.jsx(E,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Days"}),e.jsxs("p",{className:"text-xl font-semibold",children:[o,"/",a]})]}),e.jsx(Ye,{className:"h-6 w-6 text-purple-500"})]})})}),e.jsx(E,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Result Days"}),e.jsxs("p",{className:"text-xl font-semibold",children:[l,"/",a]})]}),e.jsx(Is,{className:"h-6 w-6 text-orange-500"})]})})})]}),h.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(E,{children:[e.jsx(Q,{children:e.jsx(ee,{children:"Daily Spend vs Inbound DMs"})}),e.jsx($,{children:e.jsx(Oe,{width:"100%",height:300,children:e.jsxs(zs,{data:h,children:[e.jsx(Fe,{strokeDasharray:"3 3"}),e.jsx(_e,{dataKey:"date"}),e.jsx(xe,{yAxisId:"left"}),e.jsx(xe,{yAxisId:"right",orientation:"right"}),e.jsx(Le,{formatter:(p,x)=>[x==="spend"?d(p):f(p),x==="spend"?"Spend":"Inbound DMs"]}),e.jsx(Pe,{}),e.jsx(ze,{yAxisId:"left",dataKey:"spend",fill:"#3B82F6",name:"Daily Spend"}),e.jsx(ze,{yAxisId:"right",dataKey:"inboundDMs",fill:"#10B981",name:"Inbound DMs"})]})})})]}),e.jsxs(E,{children:[e.jsx(Q,{children:e.jsx(ee,{children:"Performance Trends"})}),e.jsx($,{children:e.jsx(Oe,{width:"100%",height:300,children:e.jsxs(Es,{data:h,children:[e.jsx(Fe,{strokeDasharray:"3 3"}),e.jsx(_e,{dataKey:"date"}),e.jsx(xe,{yAxisId:"left"}),e.jsx(xe,{yAxisId:"right",orientation:"right"}),e.jsx(Le,{formatter:(p,x)=>[f(p),x==="impressions"?"Impressions (K)":"Clicks"]}),e.jsx(Pe,{}),e.jsx(Ee,{yAxisId:"left",type:"monotone",dataKey:"impressions",stroke:"#F59E0B",strokeWidth:2,name:"Impressions (K)"}),e.jsx(Ee,{yAxisId:"right",type:"monotone",dataKey:"clicks",stroke:"#8B5CF6",strokeWidth:2,name:"Clicks"})]})})})]})]}),e.jsxs(E,{children:[e.jsx(Q,{children:e.jsx(ee,{children:"Campaign Summary"})}),e.jsx($,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Average Daily Spend:"}),e.jsx("span",{className:"font-medium",children:d(n)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Average Daily DMs:"}),e.jsx("span",{className:"font-medium",children:i.toFixed(1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Click-through Rate:"}),e.jsxs("span",{className:"font-medium",children:[r.impressions>0?(r.clicks/r.impressions*100).toFixed(2):0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"DM Conversion Rate:"}),e.jsxs("span",{className:"font-medium",children:[r.clicks>0?(r.inboundDMs/r.clicks*100).toFixed(2):0,"%"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:"Campaign Activity"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Days Tracked:"}),e.jsx("span",{className:"font-medium",children:a})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Days with Spend:"}),e.jsx("span",{className:"font-medium",children:o})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Days with Results:"}),e.jsx("span",{className:"font-medium",children:l})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Success Rate:"}),e.jsxs("span",{className:"font-medium",children:[o>0?(l/o*100).toFixed(1):0,"%"]})]})]})]})]})})]}),h.length>0&&e.jsxs(E,{children:[e.jsx(Q,{children:e.jsx(ee,{children:"Daily Breakdown"})}),e.jsx($,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-left",children:[e.jsx("th",{className:"pb-2",children:"Date"}),e.jsx("th",{className:"pb-2",children:"Spend"}),e.jsx("th",{className:"pb-2",children:"DMs"}),e.jsx("th",{className:"pb-2",children:"Impressions"}),e.jsx("th",{className:"pb-2",children:"Clicks"}),e.jsx("th",{className:"pb-2",children:"Cost/DM"})]})}),e.jsx("tbody",{className:"divide-y",children:t.map((p,x)=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"py-2",children:new Date(p.date).toLocaleDateString()}),e.jsx("td",{className:"py-2",children:d(p.spend)}),e.jsx("td",{className:"py-2 font-medium",children:p.inboundDMs}),e.jsx("td",{className:"py-2",children:f(p.impressions)}),e.jsx("td",{className:"py-2",children:f(p.clicks)}),e.jsx("td",{className:"py-2",children:p.inboundDMs>0?d(p.spend/p.inboundDMs):"-"})]},x))})]})})})]})]})]})})},Xt=()=>{const{theme:r,toggleTheme:s}=St();return e.jsxs(T,{variant:"outline",size:"sm",onClick:s,className:"relative transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"relative",children:r==="light"?e.jsx(Us,{className:"h-4 w-4 transition-all duration-300 rotate-0 scale-100"}):e.jsx(As,{className:"h-4 w-4 transition-all duration-300 rotate-180 scale-100"})}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})};class Zt{constructor(){this.storageKeys={currentUser:"dmads_current_user",userList:"dmads_user_list",userProfiles:"dmads_user_profiles",masterUserList:"dmads_master_users"},this.currentUser=this.getCurrentUser(),this.initializeMasterUserList()}initializeMasterUserList(){const s=localStorage.getItem(this.storageKeys.masterUserList);if(!s)localStorage.setItem(this.storageKeys.masterUserList,JSON.stringify([]));else try{const t=JSON.parse(s);localStorage.setItem(this.storageKeys.userList,JSON.stringify(t))}catch(t){console.error("Error syncing master user list:",t)}}getCurrentUser(){const s=localStorage.getItem(this.storageKeys.currentUser);return s?JSON.parse(s):null}setCurrentUser(s){this.currentUser=s,localStorage.setItem(this.storageKeys.currentUser,JSON.stringify(s))}getAllUsers(){const s=localStorage.getItem(this.storageKeys.userList);return s?JSON.parse(s):[]}createUser(s){const{username:t,displayName:a,businessName:o,email:l}=s;if(!t||!a)throw new Error("Username and display name are required");const n=this.getAllUsers();if(n.find(u=>u.username===t))throw new Error("Username already exists");const i={id:this.generateUserId(),username:t.toLowerCase().trim(),displayName:a.trim(),businessName:(o==null?void 0:o.trim())||"",email:(l==null?void 0:l.trim())||"",createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),settings:{theme:"light",defaultDateRange:"last30days",currency:"USD"}},h=[...n,i];return localStorage.setItem(this.storageKeys.userList,JSON.stringify(h)),localStorage.setItem(this.storageKeys.masterUserList,JSON.stringify(h)),this.initializeUserData(i.id),i}loginUser(s){const a=this.getAllUsers().find(o=>o.username===s.toLowerCase().trim());if(!a)throw new Error("User not found");return a.lastLogin=new Date().toISOString(),this.updateUser(a),this.setCurrentUser(a),a}logout(){localStorage.removeItem(this.storageKeys.currentUser),this.currentUser=null}updateUser(s){const t=this.getAllUsers(),a=t.findIndex(o=>o.id===s.id);if(a===-1)throw new Error("User not found");return t[a]={...t[a],...s},localStorage.setItem(this.storageKeys.userList,JSON.stringify(t)),localStorage.setItem(this.storageKeys.masterUserList,JSON.stringify(t)),this.currentUser&&this.currentUser.id===s.id&&this.setCurrentUser(t[a]),t[a]}deleteUser(s){if(!confirm("Are you sure you want to delete this user and all their data? This cannot be undone."))return!1;const a=this.getAllUsers().filter(o=>o.id!==s);return localStorage.setItem(this.storageKeys.userList,JSON.stringify(a)),localStorage.setItem(this.storageKeys.masterUserList,JSON.stringify(a)),this.clearUserData(s),this.currentUser&&this.currentUser.id===s&&this.logout(),!0}generateUserId(){return"user_"+Date.now()+"_"+Math.random().toString(36).slice(2,11)}initializeUserData(s){[`dmads_daily_data_${s}`,`dmads_manual_entries_${s}`,`dmads_settings_${s}`].forEach(a=>{localStorage.getItem(a)||localStorage.setItem(a,JSON.stringify(a.includes("settings")?{}:[]))})}clearUserData(s){const t=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);o&&o.includes(`_${s}`)&&t.push(o)}t.forEach(a=>localStorage.removeItem(a))}getUserStorageKey(s){if(!this.currentUser)throw new Error("No user logged in");return`${s}_${this.currentUser.id}`}isLoggedIn(){return this.currentUser!==null}getUserStats(s=null){var a;const t=s||((a=this.currentUser)==null?void 0:a.id);if(!t)return null;try{const o=`dmads_daily_data_${t}`,l=`dmads_manual_entries_${t}`,n=JSON.parse(localStorage.getItem(o)||"[]"),i=JSON.parse(localStorage.getItem(l)||"{}");return{totalDays:n.length,daysWithManualData:Object.keys(i).length,oldestEntry:n.length>0?n[0].date:null,newestEntry:n.length>0?n[n.length-1].date:null,dataSize:JSON.stringify(n).length+JSON.stringify(i).length}}catch(o){return console.error("Error getting user stats:",o),null}}exportUserData(s=null){var h;const t=s||((h=this.currentUser)==null?void 0:h.id);if(!t)throw new Error("No user specified");const a=this.getAllUsers().find(u=>u.id===t);if(!a)throw new Error("User not found");const o={user:a,dailyData:JSON.parse(localStorage.getItem(`dmads_daily_data_${t}`)||"[]"),manualEntries:JSON.parse(localStorage.getItem(`dmads_manual_entries_${t}`)||"{}"),settings:JSON.parse(localStorage.getItem(`dmads_settings_${t}`)||"{}"),exportDate:new Date().toISOString(),version:"1.0"},l=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),n=URL.createObjectURL(l),i=document.createElement("a");i.href=n,i.download=`${a.username}-dmads-export-${new Date().toISOString().split("T")[0]}.json`,i.click(),URL.revokeObjectURL(n)}async importUserData(s){return new Promise((t,a)=>{const o=new FileReader;o.onload=l=>{try{const n=JSON.parse(l.target.result);if(!n.user||!n.dailyData)throw new Error("Invalid user data file");const i=this.getAllUsers(),h=i.findIndex(d=>d.username===n.user.username);let u;h>=0?(u=i[h].id,i[h]={...i[h],...n.user,id:u},localStorage.setItem(this.storageKeys.userList,JSON.stringify(i))):u=this.createUser(n.user).id,n.dailyData&&localStorage.setItem(`dmads_daily_data_${u}`,JSON.stringify(n.dailyData)),n.manualEntries&&localStorage.setItem(`dmads_manual_entries_${u}`,JSON.stringify(n.manualEntries)),n.settings&&localStorage.setItem(`dmads_settings_${u}`,JSON.stringify(n.settings)),t({userId:u,imported:n})}catch(n){a(n)}},o.readAsText(s)})}}const V=new Zt,Ge=({onAuthChange:r})=>{const[s,t]=v.useState(V.getCurrentUser()),[a,o]=v.useState(!1),[l,n]=v.useState(!1),[i,h]=v.useState([]),[u,d]=v.useState(""),[f,k]=v.useState({username:"",displayName:"",businessName:"",email:""}),[p,x]=v.useState("");v.useEffect(()=>{h(V.getAllUsers())},[]);const N=()=>{try{d("");const R=V.createUser(f);t(R),h(V.getAllUsers()),n(!1),k({username:"",displayName:"",businessName:"",email:""}),r==null||r(R)}catch(R){d(R.message)}},D=(R=p)=>{try{d("");const F=V.loginUser(R);t(F),h(V.getAllUsers()),o(!1),x(""),r==null||r(F)}catch(F){d(F.message)}},A=()=>{V.logout(),t(null),r==null||r(null)},P=R=>{V.deleteUser(R)&&(h(V.getAllUsers()),(s==null?void 0:s.id)===R&&(t(null),r==null||r(null)))},q=()=>{V.exportUserData()};return s?e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ts,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:s.displayName}),e.jsxs("span",{className:"text-muted-foreground",children:["(",s.businessName||s.username,")"]}),e.jsx(T,{variant:"outline",size:"sm",onClick:q,children:"Export Data"}),e.jsxs(T,{variant:"outline",size:"sm",onClick:A,children:[e.jsx(Os,{className:"h-4 w-4 mr-1"}),"Logout"]})]}):e.jsxs("div",{className:"space-y-4",children:[!a&&!l&&e.jsxs(E,{className:"w-full max-w-md mx-auto",children:[e.jsx(Q,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5"}),"Instagram DM Ads Dashboard"]})}),e.jsxs($,{className:"space-y-4",children:[i.length===0&&e.jsx("div",{className:"text-center space-y-2",children:e.jsx("p",{className:"text-muted-foreground",children:"Welcome! Create your first user account to get started with tracking your Instagram DM advertising performance."})}),i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Existing Users:"}),i.map(R=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:R.displayName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:R.businessName||R.username})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(T,{size:"sm",variant:"outline",onClick:()=>D(R.username),children:"Login"}),e.jsx(T,{size:"sm",variant:"destructive",onClick:()=>P(R.id),children:"Delete"})]})]},R.id))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(T,{onClick:()=>o(!0),className:"flex-1",children:[e.jsx(Fs,{className:"h-4 w-4 mr-1"}),"Login"]}),e.jsxs(T,{onClick:()=>n(!0),variant:"outline",className:"flex-1",children:[e.jsx(He,{className:"h-4 w-4 mr-1"}),"New User"]})]})]})]}),a&&e.jsxs(E,{className:"w-full max-w-md mx-auto",children:[e.jsx(Q,{children:e.jsx(ee,{children:"Login"})}),e.jsxs($,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"login-username",children:"Username"}),e.jsx(X,{id:"login-username",value:p,onChange:R=>x(R.target.value),placeholder:"Enter username"})]}),u&&e.jsx("div",{className:"text-red-500 text-sm",children:u}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{onClick:()=>D(),disabled:!p,className:"flex-1",children:"Login"}),e.jsx(T,{variant:"outline",onClick:()=>o(!1),className:"flex-1",children:"Cancel"})]})]})]}),l&&e.jsxs(E,{className:"w-full max-w-md mx-auto",children:[e.jsx(Q,{children:e.jsx(ee,{children:"Create New User"})}),e.jsxs($,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"reg-username",children:"Username *"}),e.jsx(X,{id:"reg-username",value:f.username,onChange:R=>k(F=>({...F,username:R.target.value})),placeholder:"Choose a username"})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"reg-displayname",children:"Display Name *"}),e.jsx(X,{id:"reg-displayname",value:f.displayName,onChange:R=>k(F=>({...F,displayName:R.target.value})),placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"reg-business",children:"Business Name"}),e.jsx(X,{id:"reg-business",value:f.businessName,onChange:R=>k(F=>({...F,businessName:R.target.value})),placeholder:"Your business name (optional)"})]}),e.jsxs("div",{children:[e.jsx(Y,{htmlFor:"reg-email",children:"Email"}),e.jsx(X,{id:"reg-email",type:"email",value:f.email,onChange:R=>k(F=>({...F,email:R.target.value})),placeholder:"your@email.com (optional)"})]}),u&&e.jsx("div",{className:"text-red-500 text-sm",children:u}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{onClick:N,disabled:!f.username||!f.displayName,className:"flex-1",children:"Create User"}),e.jsx(T,{variant:"outline",onClick:()=>n(!1),className:"flex-1",children:"Cancel"})]})]})]})]})},Qt={currentMetrics:{inboundDMs:0,totalSpend:0,costPerDM:0,salesBooked:0,conversations:0,meetings:0,offersMade:0,closes:0,newCloses:0,recurringCloses:0,cashCollected:0,recurringRevenue:0,newRevenue:0,totalRevenue:0,impressions:0,reach:0,clicks:0,ctr:0,costPerAcquisition:0,costPerMeeting:0,meetingToCloseRate:0,newClientCloseRate:0,dmToMeetingRate:0},previousMetrics:{inboundDMs:0,totalSpend:0,costPerDM:0,salesBooked:0,conversations:0,impressions:0,reach:0,clicks:0,ctr:0},dailyData:[],campaigns:[],funnelData:[{stage:"Impressions",value:0,percentage:0},{stage:"Clicks",value:0,percentage:0},{stage:"Inbound DMs",value:0,percentage:0},{stage:"Meetings",value:0,percentage:0},{stage:"Closes",value:0,percentage:0}]},le=Qt;class er{constructor(){this.baseStorageKeys={dailyData:"dmads_daily_data",manualEntries:"dmads_manual_entries",lastBackup:"dmads_last_backup",settings:"dmads_settings"}}getStorageKeys(){if(!V.isLoggedIn())return this.baseStorageKeys;const s=V.currentUser.id;return{dailyData:`${this.baseStorageKeys.dailyData}_${s}`,manualEntries:`${this.baseStorageKeys.manualEntries}_${s}`,lastBackup:`${this.baseStorageKeys.lastBackup}_${s}`,settings:`${this.baseStorageKeys.settings}_${s}`}}getTodayDate(){return new Date().toISOString().split("T")[0]}loadData(){try{const s=this.getDailyData(),t=this.getManualEntries(),a=this.getSettings();return{dailyData:s,manualEntries:t,settings:a,lastUpdate:new Date}}catch(s){return console.error("Error loading data:",s),{dailyData:[],manualEntries:{},settings:{},lastUpdate:new Date}}}getDailyData(){const s=this.getStorageKeys(),t=localStorage.getItem(s.dailyData);if(!t)return[];try{const a=JSON.parse(t);return Array.isArray(a)?a.sort((o,l)=>new Date(o.date)-new Date(l.date)):[]}catch(a){return console.error("Error parsing daily data:",a),[]}}getManualEntries(){const s=this.getStorageKeys(),t=localStorage.getItem(s.manualEntries);if(!t)return{};try{return JSON.parse(t)}catch(a){return console.error("Error parsing manual entries:",a),{}}}getSettings(){const s=this.getStorageKeys(),t=localStorage.getItem(s.settings);if(!t)return{};try{return JSON.parse(t)}catch(a){return console.error("Error parsing settings:",a),{}}}saveDailyEntry(s,t){const a=this.getDailyData(),o=a.findIndex(i=>i.date===s),l={date:s,...t,lastUpdated:new Date().toISOString()};if(o>=0){const i=a[o];a[o]={...l,meetings:i.meetings||l.meetings||0,offersMade:i.offersMade||l.offersMade||0,closes:i.closes||l.closes||0,newCloses:i.newCloses||l.newCloses||0,recurringCloses:i.recurringCloses||l.recurringCloses||0,cashCollected:i.cashCollected||l.cashCollected||0,revenue:i.revenue||l.revenue||0,recurringRevenue:i.recurringRevenue||l.recurringRevenue||0,newRevenue:i.newRevenue||l.newRevenue||0,totalRevenue:i.totalRevenue||l.totalRevenue||0}}else a.push(l);a.sort((i,h)=>new Date(i.date)-new Date(h.date));const n=this.getStorageKeys();return localStorage.setItem(n.dailyData,JSON.stringify(a)),this.createBackup(),a}saveManualEntry(s,t){const a=this.getManualEntries(),o=this.getDailyData();a[s]={...a[s],...t,lastUpdated:new Date().toISOString()};const l=this.getStorageKeys();localStorage.setItem(l.manualEntries,JSON.stringify(a));const n=o.findIndex(i=>i.date===s);return n>=0?o[n]={...o[n],...t,lastUpdated:new Date().toISOString()}:o.push({date:s,...t,inboundDMs:0,spend:0,impressions:0,clicks:0,reach:0,lastUpdated:new Date().toISOString()}),o.sort((i,h)=>new Date(i.date)-new Date(h.date)),localStorage.setItem(l.dailyData,JSON.stringify(o)),this.createBackup(),{dailyData:o,manualEntries:a}}bulkImportDailyData(s,t=!0){const a=this.getDailyData(),o=this.getManualEntries(),l=new Map(a.map(h=>[h.date,h]));s.forEach(h=>{const u=l.get(h.date),d=o[h.date],f={...h,lastUpdated:new Date().toISOString()};t&&(u||d)&&(f.meetings=(u==null?void 0:u.meetings)||(d==null?void 0:d.meetings)||0,f.offersMade=(u==null?void 0:u.offersMade)||(d==null?void 0:d.offersMade)||0,f.closes=(u==null?void 0:u.closes)||(d==null?void 0:d.closes)||0,f.newCloses=(u==null?void 0:u.newCloses)||(d==null?void 0:d.newCloses)||0,f.recurringCloses=(u==null?void 0:u.recurringCloses)||(d==null?void 0:d.recurringCloses)||0,f.cashCollected=(u==null?void 0:u.cashCollected)||(d==null?void 0:d.cashCollected)||0,f.revenue=(u==null?void 0:u.revenue)||(d==null?void 0:d.revenue)||0,f.recurringRevenue=(u==null?void 0:u.recurringRevenue)||(d==null?void 0:d.recurringRevenue)||0,f.newRevenue=(u==null?void 0:u.newRevenue)||(d==null?void 0:d.newRevenue)||0,f.totalRevenue=(u==null?void 0:u.totalRevenue)||(d==null?void 0:d.totalRevenue)||0),l.set(h.date,f)});const n=Array.from(l.values()).sort((h,u)=>new Date(h.date)-new Date(u.date)),i=this.getStorageKeys();return localStorage.setItem(i.dailyData,JSON.stringify(n)),this.createBackup(),n}createBackup(){const s={dailyData:this.getDailyData(),manualEntries:this.getManualEntries(),settings:this.getSettings(),timestamp:new Date().toISOString(),version:"1.0"},t=this.getStorageKeys(),a=V.isLoggedIn()?`dmads_backup_${V.currentUser.id}_${new Date().toISOString().split("T")[0]}`:`dmads_backup_${new Date().toISOString().split("T")[0]}`;localStorage.setItem(a,JSON.stringify(s)),localStorage.setItem(t.lastBackup,new Date().toISOString()),this.cleanOldBackups()}exportData(){const s={dailyData:this.getDailyData(),manualEntries:this.getManualEntries(),settings:this.getSettings(),exportDate:new Date().toISOString(),version:"1.0"},t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),o=document.createElement("a");o.href=a;const l=V.isLoggedIn()?`-${V.currentUser.username}`:"";o.download=`dm-ads-backup${l}-${new Date().toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(a)}async importData(s){return new Promise((t,a)=>{const o=new FileReader;o.onload=l=>{try{const n=JSON.parse(l.target.result),i=this.getStorageKeys();n.dailyData&&localStorage.setItem(i.dailyData,JSON.stringify(n.dailyData)),n.manualEntries&&localStorage.setItem(i.manualEntries,JSON.stringify(n.manualEntries)),n.settings&&localStorage.setItem(i.settings,JSON.stringify(n.settings)),this.createBackup(),t(n)}catch(n){a(n)}},o.readAsText(s)})}cleanOldBackups(){const s=new Date;s.setDate(s.getDate()-30);const t=[],a=V.isLoggedIn()?V.currentUser.id:null;for(let o=0;o<localStorage.length;o++){const l=localStorage.key(o);if(l&&l.startsWith("dmads_backup_")){let n;const i=l.split("_");if(a&&l.includes(`_${a}_`))n=i[3];else if(!a&&i.length===3)n=i[2];else continue;n&&new Date(n)<s&&t.push(l)}}t.forEach(o=>localStorage.removeItem(o))}getDataForDateRange(s,t){return this.getDailyData().filter(o=>{const l=new Date(o.date);return l>=new Date(s)&&l<=new Date(t)})}getStats(){const s=this.getDailyData(),t=this.getManualEntries();return{totalDays:s.length,daysWithManualData:Object.keys(t).length,oldestEntry:s.length>0?s[0].date:null,newestEntry:s.length>0?s[s.length-1].date:null,lastBackup:localStorage.getItem(this.getStorageKeys().lastBackup)}}clearAllData(){if(confirm("Are you sure you want to clear all data? This cannot be undone.")){const s=this.getStorageKeys();Object.values(s).forEach(o=>{localStorage.removeItem(o)});const t=[],a=V.isLoggedIn()?V.currentUser.id:null;for(let o=0;o<localStorage.length;o++){const l=localStorage.key(o);l&&l.startsWith("dmads_backup_")&&(a&&l.includes(`_${a}_`)?t.push(l):a||l.split("_").length===3&&t.push(l))}return t.forEach(o=>localStorage.removeItem(o)),!0}return!1}}const oe=new er,ge=r=>{if(!r||r.length===0)return le.currentMetrics;const s=r.reduce((t,a)=>({inboundDMs:t.inboundDMs+(a.inboundDMs||0),totalSpend:t.totalSpend+(a.spend||a.activeSpend||0),meetings:t.meetings+(a.meetings||0),offersMade:t.offersMade+(a.offersMade||0),closes:t.closes+(a.closes||0),newCloses:t.newCloses+(a.newCloses||0),recurringCloses:t.recurringCloses+(a.recurringCloses||0),cashCollected:t.cashCollected+(a.cashCollected||0),revenue:t.revenue+(a.revenue||a.totalRevenue||0),recurringRevenue:t.recurringRevenue+(a.recurringRevenue||0),newRevenue:t.newRevenue+(a.newRevenue||0),totalRevenue:t.totalRevenue+(a.totalRevenue||0),impressions:t.impressions+(a.impressions||a.activeImpressions||0),clicks:t.clicks+(a.clicks||a.activeClicks||0),reach:Math.max(t.reach,a.reach||a.activeReach||0)}),{inboundDMs:0,totalSpend:0,meetings:0,offersMade:0,closes:0,newCloses:0,recurringCloses:0,cashCollected:0,revenue:0,recurringRevenue:0,newRevenue:0,totalRevenue:0,impressions:0,clicks:0,reach:0});return{...s,salesBooked:s.closes,costPerDM:s.inboundDMs>0?s.totalSpend/s.inboundDMs:0,costPerAcquisition:s.newCloses>0?s.totalSpend/s.newCloses:0,costPerMeeting:s.meetings>0?s.totalSpend/s.meetings:0,ctr:s.impressions>0?parseFloat((s.clicks/s.impressions*100).toFixed(2)):0,meetingToCloseRate:s.meetings>0?parseFloat((s.closes/s.meetings*100).toFixed(2)):0,newClientCloseRate:s.meetings>0?parseFloat((s.newCloses/s.meetings*100).toFixed(2)):0,dmToMeetingRate:s.inboundDMs>0?parseFloat((s.meetings/s.inboundDMs*100).toFixed(2)):0}},sr=()=>{const[r,s]=v.useState(le),[t,a]=v.useState("last30days");v.useState([]);const[o,l]=v.useState(new Date),[n,i]=v.useState(!1),[h,u]=v.useState(!1),[d,f]=v.useState(null),[k,p]=v.useState(V.getCurrentUser());v.useEffect(()=>{if(k)try{const c=oe.loadData();if(c.dailyData&&c.dailyData.length>0){const C={...le,dailyData:c.dailyData,currentMetrics:ge(c.dailyData)};s(C)}else s(le)}catch(c){console.error("Error loading persistent data:",c)}},[k]);const x=c=>{p(c),c?l(new Date):s(le)},N=()=>{const c=new Date;let C,y=c;switch(t){case"last24hours":C=new Date(c),C.setDate(C.getDate()-1),y=new Date(C);break;case"last7days":C=new Date(c),C.setDate(C.getDate()-6);break;case"last30days":C=new Date(c),C.setDate(C.getDate()-29);break;case"monthToDate":C=new Date(c.getFullYear(),c.getMonth(),1);break;case"last3months":C=new Date(c),C.setDate(C.getDate()-89);break;default:C=new Date(c),C.setDate(C.getDate()-29)}const b=r.dailyData.filter(g=>{const w=g.date,de=C.toISOString().split("T")[0],Ce=y.toISOString().split("T")[0];return w>=de&&w<=Ce});let G=r.campaigns||[],z=r.allCampaigns||r.campaigns||[];r.campaigns&&r.campaigns.length>0&&(G=r.campaigns,z=r.allCampaigns||r.campaigns);const j=b.length>0&&b[0].hasOwnProperty("activeSpend"),Z={totalSpend:j?b.reduce((g,w)=>g+(w.allSpend||0),0):b.reduce((g,w)=>g+(w.spend||0),0),inboundDMs:j?b.reduce((g,w)=>g+(w.allDMs||0),0):b.reduce((g,w)=>g+(w.inboundDMs||0),0),meetings:b.reduce((g,w)=>g+(w.meetings||0),0),shows:b.reduce((g,w)=>g+(w.shows||0),0),offersMade:b.reduce((g,w)=>g+(w.offersMade||0),0),closes:b.reduce((g,w)=>g+(w.closes||0),0),newCloses:b.reduce((g,w)=>g+(w.newCloses||0),0),recurringCloses:b.reduce((g,w)=>g+(w.recurringCloses||0),0),cashCollected:b.reduce((g,w)=>g+(w.cashCollected||0),0),recurringRevenue:b.reduce((g,w)=>g+(w.recurringRevenue||0),0),newRevenue:b.reduce((g,w)=>g+(w.newRevenue||0),0),totalRevenue:b.reduce((g,w)=>g+(w.totalRevenue||0),0),impressions:j?b.reduce((g,w)=>g+(w.allImpressions||0),0):b.reduce((g,w)=>g+(w.impressions||0),0),clicks:j?b.reduce((g,w)=>g+(w.allClicks||0),0):b.reduce((g,w)=>g+(w.clicks||0),0),reach:Math.max(...j?b.map(g=>g.allReach||0).concat([0]):b.map(g=>g.reach||0).concat([0]))},W=j?{totalSpend:b.reduce((g,w)=>g+(w.activeSpend||0),0),inboundDMs:b.reduce((g,w)=>g+(w.activeDMs||0),0),meetings:b.reduce((g,w)=>g+(w.meetings||0),0),shows:b.reduce((g,w)=>g+(w.shows||0),0),offersMade:b.reduce((g,w)=>g+(w.offersMade||0),0),closes:b.reduce((g,w)=>g+(w.closes||0),0),newCloses:b.reduce((g,w)=>g+(w.newCloses||0),0),recurringCloses:b.reduce((g,w)=>g+(w.recurringCloses||0),0),cashCollected:b.reduce((g,w)=>g+(w.cashCollected||0),0),recurringRevenue:b.reduce((g,w)=>g+(w.recurringRevenue||0),0),newRevenue:b.reduce((g,w)=>g+(w.newRevenue||0),0),totalRevenue:b.reduce((g,w)=>g+(w.totalRevenue||0),0),impressions:b.reduce((g,w)=>g+(w.activeImpressions||0),0),clicks:b.reduce((g,w)=>g+(w.activeClicks||0),0),reach:Math.max(...b.map(g=>g.activeReach||0).concat([0]))}:{...Z};return[Z,W].forEach(g=>{g.salesBooked=g.closes,g.costPerDM=g.inboundDMs>0?g.totalSpend/g.inboundDMs:0,g.costPerAcquisition=g.newCloses>0?g.totalSpend/g.newCloses:0,g.costPerMeeting=g.meetings>0?g.totalSpend/g.meetings:0,g.ctr=g.impressions>0?parseFloat((g.clicks/g.impressions*100).toFixed(2)):0,g.meetingToCloseRate=g.meetings>0?parseFloat((g.closes/g.meetings*100).toFixed(2)):0,g.newClientCloseRate=g.meetings>0?parseFloat((g.newCloses/g.meetings*100).toFixed(2)):0,g.dmToMeetingRate=g.inboundDMs>0?parseFloat((g.meetings/g.inboundDMs*100).toFixed(2)):0}),{...r,dailyData:b,campaigns:G,allCampaigns:z,currentMetrics:{...r.currentMetrics,...W},allCampaignsMetrics:{...r.allCampaignsMetrics,...Z}}},D=c=>{s(C=>({...C,...c}))},A=c=>{try{if(c.isEdit){const{dailyData:C}=oe.saveManualEntry(c.date,{meetings:c.meetings,shows:c.shows,offersMade:c.offersMade,closes:c.closes,newCloses:c.newCloses,recurringCloses:c.recurringCloses,cashCollected:c.cashCollected,revenue:c.revenue,recurringRevenue:c.recurringRevenue||0,newRevenue:c.newRevenue,totalRevenue:c.totalRevenue}),y={dailyData:C,currentMetrics:ge(C)};D(y),l(new Date)}else{const y=oe.getDailyData().find(j=>j.date===c.date),b={meetings:((y==null?void 0:y.meetings)||0)+(c.meetings||0),offersMade:((y==null?void 0:y.offersMade)||0)+(c.offersMade||0),closes:((y==null?void 0:y.closes)||0)+(c.closes||0),newCloses:((y==null?void 0:y.newCloses)||0)+(c.newCloses||0),recurringCloses:((y==null?void 0:y.recurringCloses)||0)+(c.recurringCloses||0),cashCollected:((y==null?void 0:y.cashCollected)||0)+(c.cashCollected||0),revenue:((y==null?void 0:y.revenue)||(y==null?void 0:y.totalRevenue)||0)+(c.revenue||0),recurringRevenue:c.recurringRevenue||0,newRevenue:((y==null?void 0:y.revenue)||(y==null?void 0:y.totalRevenue)||0)+(c.revenue||0),totalRevenue:((y==null?void 0:y.revenue)||(y==null?void 0:y.totalRevenue)||0)+(c.revenue||0)},{dailyData:G}=oe.saveManualEntry(c.date,b),z={dailyData:G,currentMetrics:ge(G)};D(z),l(new Date)}}catch(C){console.error("Error saving manual entry:",C)}},P=()=>{l(new Date)},q=async c=>{try{const C=oe.bulkImportDailyData(c.dailyData,!0),y={...c,dailyData:C,currentMetrics:ge(C),previousMetrics:r.previousMetrics},b=y.currentMetrics;y.funnelData=[{stage:"Impressions",value:b.impressions,percentage:100},{stage:"Clicks",value:b.clicks,percentage:b.impressions>0?b.clicks/b.impressions*100:0},{stage:"Inbound DMs",value:b.inboundDMs,percentage:b.clicks>0?b.inboundDMs/b.clicks*100:0},{stage:"Meetings",value:b.meetings,percentage:b.inboundDMs>0?b.meetings/b.inboundDMs*100:0},{stage:"Closes",value:b.closes,percentage:b.meetings>0?b.closes/b.meetings*100:0}],D(y),l(new Date)}catch(C){throw console.error("Error importing CSV data:",C),C}},R=()=>{oe.exportData()},F=()=>{const c=N(),y=[["Date","Inbound DMs","Active Inbound DMs","All Inbound DMs","Meetings","Shows","Offers Made","Total Closes","New Client Closes","Recurring Closes","Cash Collected","Revenue","New Revenue","Recurring Revenue","Total Revenue","Ad Spend","Active Ad Spend","All Ad Spend","Impressions","Active Impressions","All Impressions","Clicks","Active Clicks","All Clicks","Reach","Active Reach","All Reach","CTR (%)","Cost Per DM","Cost Per Meeting","Cost Per Acquisition (New Clients Only)","DM to Meeting Rate (%)","Meeting to Close Rate (%)","New Client Close Rate (%)"].join(",")];c.dailyData.forEach(j=>{const Z=j.inboundDMs||j.activeDMs||0,W=j.spend||j.activeSpend||0,je=j.impressions||j.activeImpressions||0,g=j.clicks||j.activeClicks||0,w=j.meetings||0,de=j.newCloses||0,Ce=j.closes||0,ms=je>0?(g/je*100).toFixed(2):0,gs=Z>0?(W/Z).toFixed(2):0,hs=w>0?(W/w).toFixed(2):0,ps=de>0?(W/de).toFixed(2):0,xs=Z>0?(w/Z*100).toFixed(2):0,fs=w>0?(Ce/w*100).toFixed(2):0,bs=w>0?(de/w*100).toFixed(2):0,vs=[j.date,j.inboundDMs||0,j.activeDMs||0,j.allDMs||0,j.meetings||0,j.shows||0,j.offersMade||0,j.closes||0,j.newCloses||0,j.recurringCloses||0,j.cashCollected||0,j.revenue||0,j.newRevenue||0,j.recurringRevenue||0,j.totalRevenue||0,j.spend||0,j.activeSpend||0,j.allSpend||0,j.impressions||0,j.activeImpressions||0,j.allImpressions||0,j.clicks||0,j.activeClicks||0,j.allClicks||0,j.reach||0,j.activeReach||0,j.allReach||0,ms,gs,hs,ps,xs,fs,bs];y.push(vs.join(","))});const b=y.join(`
`),G=new Blob([b],{type:"text/csv;charset=utf-8;"}),z=document.createElement("a");if(z.download!==void 0){const j=URL.createObjectURL(G);z.setAttribute("href",j);const Z=c.dailyData.length>0?c.dailyData[0].date:"unknown",W=c.dailyData.length>0?c.dailyData[c.dailyData.length-1].date:"unknown";z.setAttribute("download",`dm-ads-data-${Z}-to-${W}-${t}.csv`),z.style.visibility="hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z),re.success(`CSV exported successfully! (${c.dailyData.length} rows)`)}},{campaignDailyData:I}=r,O=N(),S=h&&O.allCampaignsMetrics||O.currentMetrics,B=h&&O.allCampaigns||O.campaigns,M=S.dmToMeetingRate||0,_=S.meetingToCloseRate||0,m=S.inboundDMs>0?parseFloat((S.closes/S.inboundDMs*100).toFixed(2)):0;return S.inboundDMs>0&&parseFloat((S.newCloses/S.inboundDMs*100).toFixed(2)),k?e.jsxs("div",{className:"min-h-screen bg-background p-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Instagram DM Ads Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your service-based business performance"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("select",{value:t,onChange:c=>a(c.target.value),className:"px-3 py-1 border border-border rounded-md text-sm bg-background text-foreground",children:[e.jsx("option",{value:"last24hours",children:"Last 24 Hours"}),e.jsx("option",{value:"last7days",children:"Last 7 Days"}),e.jsx("option",{value:"last30days",children:"Last 30 Days"}),e.jsx("option",{value:"monthToDate",children:"Month to Date"}),e.jsx("option",{value:"last3months",children:"Last 3 Months"})]}),e.jsx(Xt,{}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>u(!h),className:h?"bg-blue-50 border-blue-200":"",children:[h?e.jsx(_s,{className:"h-4 w-4 mr-1"}):e.jsx(Ls,{className:"h-4 w-4 mr-1"}),h?"All Campaigns":"Active Only"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:P,children:[e.jsx(Ps,{className:"h-4 w-4 mr-1"}),"Refresh"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>i(!0),children:[e.jsx(be,{className:"h-4 w-4 mr-1"}),"Import CSV"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:R,children:[e.jsx(De,{className:"h-4 w-4 mr-1"}),"Backup"]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:F,children:[e.jsx(De,{className:"h-4 w-4 mr-1"}),"Export CSV"]}),e.jsx("input",{type:"file",accept:".json",onChange:c=>{var y;const C=(y=c.target.files)==null?void 0:y[0];C&&oe.importData(C).then(()=>{const b=oe.loadData(),G={...le,dailyData:b.dailyData,currentMetrics:ge(b.dailyData)};s(G),l(new Date)}).catch(b=>{console.error("Error restoring backup:",b)}),c.target.value=""},style:{display:"none"},id:"backup-restore"}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>{var c;return(c=document.getElementById("backup-restore"))==null?void 0:c.click()},children:[e.jsx(be,{className:"h-4 w-4 mr-1"}),"Restore"]}),e.jsx(Ge,{onAuthChange:x})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Last updated: ",o.toLocaleString()]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(se,{title:"Cost Per Acquisition (CPA)",value:S.costPerAcquisition||0,format:"currency",icon:Se,subtitle:"The lifeblood of your ads",className:"border-2 border-green-500 bg-green-50",large:!0})}),e.jsxs("div",{className:"lg:col-span-2 grid grid-cols-2 gap-4",children:[e.jsx(se,{title:"Total Ad Spend",value:S.totalSpend,format:"currency",icon:fe,subtitle:`${t.replace(/([A-Z])/g," $1").toLowerCase()}`}),e.jsx(se,{title:"Closes",value:S.closes||0,icon:he,subtitle:`${m.toFixed(2)}% overall conversion rate`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsx(se,{title:"Inbound DMs",value:S.inboundDMs||0,icon:Ze,subtitle:"Lead generation"}),e.jsx(se,{title:"Meetings",value:S.meetings||0,icon:ve,subtitle:`${M.toFixed(2)}% booking ratio`}),e.jsx(se,{title:"Shows",value:S.shows||0,icon:ve,subtitle:`${S.showRate?S.showRate.toFixed(2):0}% show rate`}),e.jsx(se,{title:"Offers Made",value:S.offersMade||0,icon:he,subtitle:`${S.meetings>0?(S.offersMade/S.meetings*100).toFixed(2):0}% offer rate`}),e.jsx(se,{title:"Close Rate",value:_,format:"percentage",icon:Se,subtitle:"Meeting to close %"}),e.jsx(se,{title:"Cash Collected",value:S.cashCollected||0,format:"currency",icon:fe,subtitle:"Total cash collected"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(se,{title:"Total Revenue",value:S.revenue||S.totalRevenue||0,format:"currency",icon:fe,subtitle:"Full deal value"}),e.jsx(se,{title:"ROAS (Return on Ad Spend)",value:S.totalSpend>0?(S.revenue||S.totalRevenue||0)/S.totalSpend:0,format:"decimal",icon:he,subtitle:`${S.totalSpend>0?((S.revenue||S.totalRevenue||0)/S.totalSpend).toFixed(1):0}x return`})]}),e.jsx("div",{className:"w-full",children:e.jsx(Jt,{onDataSubmit:A})}),e.jsx("div",{className:"w-full",children:e.jsx(Gt,{campaigns:B,onCampaignClick:c=>f(c),showAllCampaigns:h})}),e.jsx("div",{className:"w-full",children:e.jsx(Tt,{data:O.dailyData,onDataUpdate:A,title:`Editable Manual Entry Data - ${t.replace(/([A-Z])/g," $1").toLowerCase()}`})}),e.jsx("div",{className:"text-center text-sm text-muted-foreground py-4",children:e.jsxs("p",{children:["This dashboard tracks Instagram DM ad performance for service-based businesses.",e.jsx("br",{}),"Import your Facebook Ads CSV data to replace sample data with real metrics."]})})]}),n&&e.jsx(Ht,{onDataImport:q,onClose:()=>i(!1)}),d&&e.jsx(Yt,{campaign:d,campaignDailyData:I?I[d.name]||[]:[],onClose:()=>f(null)})]}):e.jsx("div",{className:"min-h-screen bg-background p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Instagram DM Ads Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Please login or create an account to access your personalized dashboard"})]}),e.jsx(Ge,{onAuthChange:x})]})})};function tr(){return e.jsx("div",{className:"App",children:e.jsx(sr,{})})}ts(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsxs(kt,{children:[e.jsx(tr,{}),e.jsx(Dt,{})]})}));
